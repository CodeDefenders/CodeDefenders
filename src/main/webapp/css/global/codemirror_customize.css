/**
 * Copyright (C) 2016-2025 Code Defenders contributors
 *
 * This file is part of Code Defenders.
 *
 * Code Defenders is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or (at
 * your option) any later version.
 *
 * Code Defenders is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 * General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Code Defenders. If not, see <http://www.gnu.org/licenses/>.
 */
/* (Page-wide) CodeMirror customizations
============================================================================= */

/* Add a bit more padding on the left side.
----------------------------------------------------------------------------- */

.CodeMirror-gutters {
    padding-right: .2em;
    padding-left: .2em;
}
pre.CodeMirror-line {
    padding-left: .4em;
}

/* Mutant Icons
----------------------------------------------------------------------------- */

.gh-mutant-icons {
    display: flex;
    width: max-content;
    align-content: center;
    gap: 1px;
    margin-left: 1px;
}
.gh-mutant-icon {
    position: relative;
}
.gh-mutant-icon::after {
    content: attr(data-count);

    /* Position */
    position: absolute;
    top: 0;
    left: 100%;
    transform: translate(-50%, -50%);
    z-index: 2;

    /* Font */
    color: white;
    font-weight: bold;
    font-size: .75em;
    line-height: 1;

    /* Background */
    background-color: #dc3545;
    padding: .25rem;
    border-radius: 50rem;
}

/* Highlighting colors / decorations
----------------------------------------------------------------------------- */

.line-error { border-bottom: 1px dotted #ff0000; }
.coverage-0 { background-color: rgba(153, 255, 153, 0.00); }
.coverage-1 { background-color: rgba(153, 255, 153, 0.208); }
.coverage-2 { background-color: rgba(153, 255, 153, 0.216); }
.coverage-3 { background-color: rgba(153, 255, 153, 0.224); }
.coverage-4 { background-color: rgba(153, 255, 153, 0.232); }
.coverage-5 { background-color: rgba(153, 255, 153, 0.24); }
.coverage-6 { background-color: rgba(153, 255, 153, 0.248); }
.coverage-7 { background-color: rgba(153, 255, 153, 0.256); }
.coverage-8 { background-color: rgba(153, 255, 153, 0.264); }
.coverage-9 { background-color: rgba(153, 255, 153, 0.272); }
.coverage-10 { background-color: rgba(153, 255, 153, 0.28); }
.coverage-11 { background-color: rgba(153, 255, 153, 0.288); }
.coverage-12 { background-color: rgba(153, 255, 153, 0.296); }
.coverage-13 { background-color: rgba(153, 255, 153, 0.304); }
.coverage-14 { background-color: rgba(153, 255, 153, 0.312); }
.coverage-15 { background-color: rgba(153, 255, 153, 0.32); }
.coverage-16 { background-color: rgba(153, 255, 153, 0.328); }
.coverage-17 { background-color: rgba(153, 255, 153, 0.336); }
.coverage-18 { background-color: rgba(153, 255, 153, 0.344); }
.coverage-19 { background-color: rgba(153, 255, 153, 0.352); }
.coverage-20 { background-color: rgba(153, 255, 153, 0.36); }
.coverage-21 { background-color: rgba(153, 255, 153, 0.368); }
.coverage-22 { background-color: rgba(153, 255, 153, 0.376); }
.coverage-23 { background-color: rgba(153, 255, 153, 0.384); }
.coverage-24 { background-color: rgba(153, 255, 153, 0.392); }
.coverage-25 { background-color: rgba(153, 255, 153, 0.4); }
.coverage-26 { background-color: rgba(153, 255, 153, 0.408); }
.coverage-27 { background-color: rgba(153, 255, 153, 0.416); }
.coverage-28 { background-color: rgba(153, 255, 153, 0.424); }
.coverage-29 { background-color: rgba(153, 255, 153, 0.432); }
.coverage-30 { background-color: rgba(153, 255, 153, 0.44); }
.coverage-31 { background-color: rgba(153, 255, 153, 0.448); }
.coverage-32 { background-color: rgba(153, 255, 153, 0.456); }
.coverage-33 { background-color: rgba(153, 255, 153, 0.464); }
.coverage-34 { background-color: rgba(153, 255, 153, 0.472); }
.coverage-35 { background-color: rgba(153, 255, 153, 0.48); }
.coverage-36 { background-color: rgba(153, 255, 153, 0.488); }
.coverage-37 { background-color: rgba(153, 255, 153, 0.496); }
.coverage-38 { background-color: rgba(153, 255, 153, 0.504); }
.coverage-39 { background-color: rgba(153, 255, 153, 0.512); }
.coverage-40 { background-color: rgba(153, 255, 153, 0.52); }
.coverage-41 { background-color: rgba(153, 255, 153, 0.528); }
.coverage-42 { background-color: rgba(153, 255, 153, 0.536); }
.coverage-43 { background-color: rgba(153, 255, 153, 0.544); }
.coverage-44 { background-color: rgba(153, 255, 153, 0.552); }
.coverage-45 { background-color: rgba(153, 255, 153, 0.56); }
.coverage-46 { background-color: rgba(153, 255, 153, 0.568); }
.coverage-47 { background-color: rgba(153, 255, 153, 0.576); }
.coverage-48 { background-color: rgba(153, 255, 153, 0.584); }
.coverage-49 { background-color: rgba(153, 255, 153, 0.592); }
.coverage-50 { background-color: rgba(153, 255, 153, 0.6); }
.coverage-51 { background-color: rgba(153, 255, 153, 0.608); }
.coverage-52 { background-color: rgba(153, 255, 153, 0.616); }
.coverage-53 { background-color: rgba(153, 255, 153, 0.624); }
.coverage-54 { background-color: rgba(153, 255, 153, 0.632); }
.coverage-55 { background-color: rgba(153, 255, 153, 0.64); }
.coverage-56 { background-color: rgba(153, 255, 153, 0.648); }
.coverage-57 { background-color: rgba(153, 255, 153, 0.656); }
.coverage-58 { background-color: rgba(153, 255, 153, 0.664); }
.coverage-59 { background-color: rgba(153, 255, 153, 0.672); }
.coverage-60 { background-color: rgba(153, 255, 153, 0.68); }
.coverage-61 { background-color: rgba(153, 255, 153, 0.688); }
.coverage-62 { background-color: rgba(153, 255, 153, 0.696); }
.coverage-63 { background-color: rgba(153, 255, 153, 0.704); }
.coverage-64 { background-color: rgba(153, 255, 153, 0.712); }
.coverage-65 { background-color: rgba(153, 255, 153, 0.72); }
.coverage-66 { background-color: rgba(153, 255, 153, 0.728); }
.coverage-67 { background-color: rgba(153, 255, 153, 0.736); }
.coverage-68 { background-color: rgba(153, 255, 153, 0.744); }
.coverage-69 { background-color: rgba(153, 255, 153, 0.752); }
.coverage-70 { background-color: rgba(153, 255, 153, 0.76); }
.coverage-71 { background-color: rgba(153, 255, 153, 0.768); }
.coverage-72 { background-color: rgba(153, 255, 153, 0.776); }
.coverage-73 { background-color: rgba(153, 255, 153, 0.784); }
.coverage-74 { background-color: rgba(153, 255, 153, 0.792); }
.coverage-75 { background-color: rgba(153, 255, 153, 0.8); }
.coverage-76 { background-color: rgba(153, 255, 153, 0.808); }
.coverage-77 { background-color: rgba(153, 255, 153, 0.816); }
.coverage-78 { background-color: rgba(153, 255, 153, 0.824); }
.coverage-79 { background-color: rgba(153, 255, 153, 0.832); }
.coverage-80 { background-color: rgba(153, 255, 153, 0.84); }
.coverage-81 { background-color: rgba(153, 255, 153, 0.848); }
.coverage-82 { background-color: rgba(153, 255, 153, 0.856); }
.coverage-83 { background-color: rgba(153, 255, 153, 0.864); }
.coverage-84 { background-color: rgba(153, 255, 153, 0.872); }
.coverage-85 { background-color: rgba(153, 255, 153, 0.88); }
.coverage-86 { background-color: rgba(153, 255, 153, 0.888); }
.coverage-87 { background-color: rgba(153, 255, 153, 0.896); }
.coverage-88 { background-color: rgba(153, 255, 153, 0.904); }
.coverage-89 { background-color: rgba(153, 255, 153, 0.912); }
.coverage-90 { background-color: rgba(153, 255, 153, 0.92); }
.coverage-91 { background-color: rgba(153, 255, 153, 0.928); }
.coverage-92 { background-color: rgba(153, 255, 153, 0.936); }
.coverage-93 { background-color: rgba(153, 255, 153, 0.944); }
.coverage-94 { background-color: rgba(153, 255, 153, 0.952); }
.coverage-95 { background-color: rgba(153, 255, 153, 0.96); }
.coverage-96 { background-color: rgba(153, 255, 153, 0.968); }
.coverage-97 { background-color: rgba(153, 255, 153, 0.976); }
.coverage-98 { background-color: rgba(153, 255, 153, 0.984); }
.coverage-99 { background-color: rgba(153, 255, 153, 0.992); }
.coverage-100 { background-color: rgba(153, 255, 153, 1.0); }

/* Style for read-only CodeMirror instances
----------------------------------------------------------------------------- */

/* Hide the cursor. Codemirror also has the option [readOnly: 'nocursor'], but it has some problems (e.g. copy & paste
   does not work). */
.CodeMirror.codemirror-readonly .CodeMirror-cursor {
    display: none !important
}

/* Style for CodeMirror instances that toggle between readonly and editable
----------------------------------------------------------------------------- */

/* Add .codemirror-readonly to the .CodeMirror container to display a lock in the corner. */
.CodeMirror.codemirror-readonly-toggle.codemirror-readonly::after {
    position: absolute;
    top: 8px;
    right: 8px;
    content: "\f023"; /* fontawesome lock icon */
    font: normal normal normal 24px/1 FontAwesome;
    color: var(--bs-gray);
    z-index: 10; /* CodeMirror search dialog has z-index 15 */
}
/* When .codemirror-readonly-toggle is present in the container as well, the lines are grayed out to make it more
   noticeable when the editor is toggled between readonly and editable. */
.CodeMirror.codemirror-readonly-toggle.codemirror-readonly {
    background: #f7f7f7;
}

/* Sizing
----------------------------------------------------------------------------- */

/*
 * Different ways to set the size of a CodeMirror editor:
 *
 * - Full size:
 *       Use [editor.setSize('100%', '100%');].

 * - Other fixed size:
 *       Use [editor.setSize(..., ...);].

 * - Size depending on parent element:
 *       Don't use [editor.setSize(..., ...);].
 *       Add .codemirror-fill to the parent element.

 * - Size depending on content but constrained to min/max height/width:
 *       Don't use [editor.setSize(..., ...);].
 *       Add .codemirror-expand and [style="--cm-min-height: ..."] etc. to the parent element.
 *       (Or use a predefined class that sets the CSS variables instead of the style attribute.)
 */

/* https://stackoverflow.com/questions/4804581/css-expand-float-child-div-height-to-parents-height */
.codemirror-fill {
    position: relative;
}
.codemirror-fill .CodeMirror {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

/* https://discuss.codemirror.net/t/codemirror-6-setting-a-minimum-height-but-allow-the-editor-to-grow/2520/2 */
.codemirror-expand .CodeMirror {
    width: 100%;
    height: 100%;
}
.codemirror-expand .CodeMirror-scroll {
    min-height: var(--cm-min-height, unset);
    max-height: var(--cm-max-height, unset);
    min-width: var(--cm-min-width, unset);
    max-width: var(--cm-max-width, unset);
}
/* Reasonable sizes for CodeMirror centered modals. */
.codemirror-class-modal-size {
    --cm-min-height: 100px;
    --cm-max-height: 800px; /* Comfortable max-height for 1080p screens. */
    --cm-min-width: 700px;  /* Fits about 80 chars of code. */
    --cm-max-width: 1000px; /* Fits about 120 chars of code. */
}
.codemirror-test-modal-size {
    --cm-min-height: 100px;
    --cm-max-height: 800px;
    --cm-min-width: 500px;
    --cm-max-width: 1000px;
}
.codemirror-mutant-modal-size {
    --cm-min-height: 100px;
    --cm-max-height: 800px;
    --cm-min-width: 400px;
    --cm-max-width: 1000px;
}

/* Style for individual readonly lines.
----------------------------------------------------------------------------- */

.readonly-line {
    opacity: .5;
    filter: alpha(opacity = 50);
}
